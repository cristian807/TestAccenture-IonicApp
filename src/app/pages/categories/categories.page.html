<!-- 
  P치gina de Categor칤as
  
  Aqu칤 se pueden crear, editar y eliminar categor칤as
  para organizar las tareas.
-->

<!-- Header -->
<ion-header>
  <ion-toolbar color="primary">
    <!-- Bot칩n para volver -->
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    
    <ion-title>游늬 Categor칤as</ion-title>
  </ion-toolbar>
</ion-header>

<!-- Contenido -->
<ion-content class="ion-padding">
  
  <!-- Secci칩n para crear nueva categor칤a -->
  <div class="add-category-section">
    <h3>Nueva Categor칤a</h3>
    
    <!-- Input del nombre -->
    <ion-item class="category-input">
      <ion-icon name="folder-outline" slot="start"></ion-icon>
      <ion-input 
        [(ngModel)]="newCategoryName" 
        placeholder="Nombre de la categor칤a"
        (keyup.enter)="addCategory()">
      </ion-input>
    </ion-item>
    
    <!-- Selector de color -->
    <div class="color-selector">
      <ion-icon name="color-palette-outline"></ion-icon>
      <span>Color:</span>
      <div class="color-options">
        <div 
          *ngFor="let color of availableColors"
          class="color-option"
          [style.background-color]="color"
          [class.selected]="selectedColor === color"
          (click)="selectColor(color)">
        </div>
      </div>
    </div>
    
    <!-- Bot칩n de agregar -->
    <ion-button expand="block" (click)="addCategory()">
      <ion-icon name="add-outline" slot="start"></ion-icon>
      Crear Categor칤a
    </ion-button>
  </div>
  
  <!-- Separador -->
  <div class="divider"></div>
  
  <!-- Lista de categor칤as existentes -->
  <h3>Mis Categor칤as</h3>
  
  <ion-list *ngIf="categories.length > 0">
    <ion-item-sliding *ngFor="let category of categories; trackBy: trackByCategoryId">
      
      <ion-item>
        <!-- Indicador de color -->
        <div 
          class="color-indicator" 
          [style.background-color]="category.color"
          slot="start">
        </div>
        
        <!-- Nombre de la categor칤a -->
        <ion-label>
          <h2>{{ category.name }}</h2>
          <ion-note>{{ getTaskCount(category.id) }} tarea(s)</ion-note>
        </ion-label>
        
        <!-- Bot칩n de editar -->
        <ion-button fill="clear" slot="end" (click)="editCategory(category)">
          <ion-icon name="create-outline" slot="icon-only"></ion-icon>
        </ion-button>
      </ion-item>
      
      <!-- Opci칩n de eliminar al deslizar -->
      <ion-item-options side="end">
        <ion-item-option color="danger" (click)="deleteCategory(category)">
          <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
        </ion-item-option>
      </ion-item-options>
      
    </ion-item-sliding>
  </ion-list>
  
  <!-- Estado vac칤o -->
  <div class="empty-state" *ngIf="categories.length === 0">
    <ion-icon name="folder-outline"></ion-icon>
    <h2>Sin categor칤as</h2>
    <p>Crea tu primera categor칤a arriba</p>
  </div>

</ion-content>
